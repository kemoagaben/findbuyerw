import React, { useState, useEffect } from 'react';
import { Search, MessageSquare, Package, User, Phone, Mail, Shield, Clock, DollarSign, Star, Send, Bot, X, Filter, Sparkles, TrendingUp, Zap, Award, Home, LogIn, UserPlus, Menu, Settings, Bell, Heart, MapPin, Calendar, Eye, CheckCircle, AlertCircle, Camera, Mic, Video, FileText, Users, Globe, AlertTriangle, Timer, Crown, Diamond, Flame, Target, ChevronRight, ChevronDown, Plus, Minus, Edit, Trash2, Share2, Download } from 'lucide-react';

// Mock veri
const mockRequests = [
  {
    id: 1,
    title: "2024 Model BMW X3 SUV AraÃ§",
    category: "Otomotiv",
    description: "2024 sonrasÄ± model, dÃ¼ÅŸÃ¼k km, otomatik vites SUV araÃ§ arÄ±yorum. Tercihen beyaz veya gÃ¼mÃ¼ÅŸ renk.",
    budget: 1150000,
    deadline: "2025-07-15",
    location: "Ä°stanbul",
    createdAt: "2025-06-01",
    status: "active",
    offerCount: 15,
    urgency: "high",
    isEmergency: false,
    verified: true
  },
  {
    id: 2,
    title: "3+1 KiralÄ±k Daire",
    category: "Emlak", 
    description: "KadÄ±kÃ¶y'de deniz manzaralÄ±, eÅŸyalÄ± 3+1 daire arÄ±yorum. Tercihen 2-3. kat.",
    budget: 25000,
    deadline: "2025-06-20",
    location: "Ä°stanbul",
    createdAt: "2025-06-03",
    status: "active",
    offerCount: 23,
    urgency: "medium",
    isEmergency: false,
    verified: true
  },
  {
    id: 3,
    title: "ğŸš¨ ACÄ°L - Kalp HastasÄ± UlaÅŸÄ±m",
    category: "UlaÅŸÄ±m",
    description: "Kalp krizi geÃ§iren babam iÃ§in acil hastane ulaÅŸÄ±mÄ± gerekiyor. BeÅŸiktaÅŸ'tan AcÄ±badem'e.",
    budget: 500,
    deadline: "2025-06-14",
    location: "Ä°stanbul",
    createdAt: "2025-06-14",
    status: "active",
    offerCount: 8,
    urgency: "emergency",
    isEmergency: true,
    emergencyType: "health",
    verified: true,
    proofDocument: "Doktor raporu doÄŸrulandÄ±"
  },
  {
    id: 4,
    title: "Web Sitesi TasarÄ±mÄ±",
    category: "Hizmet",
    description: "E-ticaret sitesi tasarÄ±mÄ± ve kodlamasÄ±. Modern, responsive tasarÄ±m gerekli.",
    budget: 50000,
    deadline: "2025-08-01",
    location: "Online",
    createdAt: "2025-06-04",
    status: "active", 
    offerCount: 31,
    urgency: "low",
    isEmergency: false,
    verified: true
  },
  {
    id: 5,
    title: "Ev Temizlik Hizmeti",
    category: "Hizmet",
    description: "3+1 ev iÃ§in genel temizlik + mutfak ve banyo detaylÄ± temizlik. YarÄ±n 14:00'dan sonra.",
    budget: 300,
    deadline: "2025-06-15",
    location: "Ä°stanbul Ãœmraniye",
    createdAt: "2025-06-14",
    status: "active",
    offerCount: 7,
    urgency: "high",
    isEmergency: false,
    verified: true
  }
];

const mockOffers = [
  {
    id: 1,
    requestId: 1,
    sellerName: "Premium Motors",
    sellerRating: 4.9,
    sellerBadge: "gold",
    offerPrice: 1150000,
    description: "2024 BMW X3 xDrive20d M Sport, 0 km, tam donanÄ±m",
    deliveryTime: "15 gÃ¼n",
    advantages: ["SÄ±fÄ±r km", "M Sport paket", "4 yÄ±l garanti"],
    disadvantages: ["BÃ¼tÃ§e Ã¼st limit", "15 gÃ¼n teslimat"],
    aiPrediction: {
      valueRetention: 85,
      maintenanceCost: 15000,
      fuelCost: 2800,
      riskLevel: 5
    },
    createdAt: "2025-06-02"
  },
  {
    id: 2,
    requestId: 1,
    sellerName: "Auto Gallery",
    sellerRating: 4.6,
    sellerBadge: "silver", 
    offerPrice: 1080000,
    description: "2023 BMW X3 xDrive20d, 12.000 km, servis bakÄ±mlÄ±",
    deliveryTime: "3 gÃ¼n",
    advantages: ["BÃ¼tÃ§e dostu", "HÄ±zlÄ± teslimat", "DÃ¼ÅŸÃ¼k km"],
    disadvantages: ["1 yaÅŸ eski", "M Sport yok"],
    aiPrediction: {
      valueRetention: 78,
      maintenanceCost: 18000,
      fuelCost: 2900,
      riskLevel: 15
    },
    createdAt: "2025-06-02"
  },
  {
    id: 3,
    requestId: 3,
    sellerName: "Acil Ambulans Hizmetleri",
    sellerRating: 4.8,
    sellerBadge: "hero",
    offerPrice: 500,
    description: "Ã–zel ambulans ile hÄ±zlÄ± ve gÃ¼venli hasta nakli",
    deliveryTime: "10 dakika",
    advantages: ["TÄ±bbi ekipman", "Deneyimli ekip", "HÄ±zlÄ±"],
    disadvantages: [],
    emergencyResponse: true,
    heroStatus: true,
    createdAt: "2025-06-14"
  }
];

const mockSellers = [
  {
    id: 1,
    name: "TechPro BiliÅŸim",
    category: "Hizmet",
    rating: 4.9,
    reviewCount: 127,
    location: "Ä°stanbul",
    verified: true,
    badge: "gold",
    specialties: ["Web TasarÄ±m", "E-ticaret", "Mobil App"],
    completedProjects: 89,
    responseTime: "2 saat",
    avatar: "ğŸ¢",
    clusterMember: true,
    emergencyHero: false
  },
  {
    id: 2,
    name: "Premium Emlak",
    category: "Emlak",
    rating: 4.7,
    reviewCount: 203,
    location: "Ä°stanbul",
    verified: true,
    badge: "gold",
    specialties: ["KiralÄ±k", "SatÄ±lÄ±k", "YatÄ±rÄ±m"],
    completedProjects: 156,
    responseTime: "30 dk",
    avatar: "ğŸ ",
    clusterMember: false,
    emergencyHero: false
  },
  {
    id: 3,
    name: "AutoMax Galeri",
    category: "Otomotiv", 
    rating: 4.8,
    reviewCount: 95,
    location: "Ä°stanbul",
    verified: true,
    badge: "gold",
    specialties: ["SUV", "Sedan", "Hatchback"],
    completedProjects: 67,
    responseTime: "1 saat",
    avatar: "ğŸš—",
    clusterMember: true,
    emergencyHero: false
  },
  {
    id: 4,
    name: "Acil Ambulans Hizmetleri",
    category: "SaÄŸlÄ±k",
    rating: 5.0,
    reviewCount: 284,
    location: "Ä°stanbul",
    verified: true,
    badge: "hero",
    specialties: ["Acil UlaÅŸÄ±m", "Hasta Nakli", "Ambulans"],
    completedProjects: 1247,
    responseTime: "5 dakika",
    avatar: "ğŸš‘",
    clusterMember: false,
    emergencyHero: true,
    heroStats: {
      livesHelped: 134,
      emergencyResponse: "30 saniye",
      successRate: "99.8%"
    }
  }
];

const categories = [
  { id: 'automotive', name: 'Otomotiv', icon: 'ğŸš—', color: 'from-blue-400 to-blue-600' },
  { id: 'realestate', name: 'Emlak', icon: 'ğŸ ', color: 'from-green-400 to-green-600' },
  { id: 'services', name: 'Hizmetler', icon: 'âš¡', color: 'from-purple-400 to-purple-600' },
  { id: 'electronics', name: 'Elektronik', icon: 'ğŸ“±', color: 'from-red-400 to-red-600' },
  { id: 'health', name: 'SaÄŸlÄ±k', icon: 'ğŸ¥', color: 'from-red-500 to-red-700' },
  { id: 'transport', name: 'UlaÅŸÄ±m', icon: 'ğŸš•', color: 'from-yellow-400 to-yellow-600' },
  { id: 'education', name: 'EÄŸitim', icon: 'ğŸ“š', color: 'from-indigo-400 to-indigo-600' }
];

const FindBuyerApp = () => {
  const [currentScreen, setCurrentScreen] = useState('welcome');
  const [userType, setUserType] = useState('buyer');
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [selectedRequest, setSelectedRequest] = useState(null);
  const [showChatbot, setShowChatbot] = useState(false);
  const [chatMessages, setChatMessages] = useState([]);
  const [currentMessage, setCurrentMessage] = useState('');
  const [searchTerm, setSearchTerm] = useState('');
  const [isRegistered, setIsRegistered] = useState(false);
  const [chatStep, setChatStep] = useState(null);
  const [registrationData, setRegistrationData] = useState({});
  const [scrollY, setScrollY] = useState(0);
  const [showOfferModal, setShowOfferModal] = useState(false);
  const [selectedOffer, setSelectedOffer] = useState(null);
  const [showEmergencyModal, setShowEmergencyModal] = useState(false);
  const [showClusterModal, setShowClusterModal] = useState(false);
  const [userMembership, setUserMembership] = useState('free');
  const [showAnalysisModal, setShowAnalysisModal] = useState(false);

  // 3D parallax efekti
  useEffect(() => {
    const handleScroll = () => setScrollY(window.scrollY);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // Filtreleme
  const filteredRequests = mockRequests.filter(request => {
    const matchesSearch = request.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                         request.description.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesCategory = selectedCategory === 'all' || request.category.toLowerCase() === selectedCategory.toLowerCase();
    return matchesSearch && matchesCategory;
  });

  // Aciliyet sÄ±ralamasÄ±
  const sortedRequests = filteredRequests.sort((a, b) => {
    const urgencyOrder = { emergency: 0, high: 1, medium: 2, low: 3 };
    return urgencyOrder[a.urgency] - urgencyOrder[b.urgency];
  });

  // Chatbot mesaj gÃ¶nderme - Claude AI entegrasyonu
  const sendChatMessage = () => {
    if (!currentMessage.trim()) return;

    const userMessage = { text: currentMessage, sender: 'user', timestamp: new Date() };
    setChatMessages([...chatMessages, userMessage]);

    // Claude typing indicator
    setChatMessages(prev => [...prev, { 
      text: 'ğŸ§  Claude dÃ¼ÅŸÃ¼nÃ¼yor...', 
      sender: 'bot', 
      timestamp: new Date(), 
      isTyping: true 
    }]);

    setTimeout(() => {
      setChatMessages(prev => prev.filter(msg => !msg.isTyping));
      
      const botResponse = generateBotResponse(currentMessage);
      setChatMessages(prev => [...prev, { 
        text: botResponse.text, 
        sender: 'bot', 
        timestamp: new Date(), 
        quickReplies: botResponse.quickReplies,
        type: botResponse.type
      }]);
    }, 1500);

    setCurrentMessage('');
  };

  // AI chatbot yanÄ±t sistemi - Claude baÄŸlantÄ±lÄ±
  const generateBotResponse = (message) => {
    const lowerMessage = message.toLowerCase();
    
    // KayÄ±t akÄ±ÅŸÄ±
    if (lowerMessage.includes('kayÄ±t') || lowerMessage.includes('Ã¼ye') || chatStep === 'register') {
      if (!chatStep) {
        setChatStep('register_start');
        return {
          text: 'ğŸ‰ Harika! FindBuyer\'a hoÅŸ geldiniz! Ben Claude AI asistanÄ±nÄ±zÄ±m. HiÃ§ form doldurmadan, sadece konuÅŸarak Ã¼ye olacaksÄ±nÄ±z. Hangi rolde katÄ±lmak istersiniz?\n\nğŸ’¡ Ä°pucu: Claude olarak size kiÅŸiselleÅŸtirilmiÅŸ Ã¶neriler sunacaÄŸÄ±m!',
          quickReplies: ['ğŸ›’ AlÄ±cÄ± olarak', 'ğŸª SatÄ±cÄ± olarak', 'ğŸ‘¥ Her ikisi de'],
          type: 'registration'
        };
      }
      
      if (chatStep === 'register_start') {
        if (lowerMessage.includes('alÄ±cÄ±')) {
          setChatStep('register_name');
          setRegistrationData({...registrationData, userType: 'buyer'});
          return {
            text: 'ğŸ›’ MÃ¼kemmel seÃ§im! AlÄ±cÄ± olarak kayÄ±t oluyorsunuz. Size nasÄ±l hitap etmemi istersiniz?\n\nğŸ§  Claude olarak, kiÅŸisel alÄ±ÅŸveriÅŸ tercihlerinizi Ã¶ÄŸrenerek size en uygun teklifleri Ã¶nerebilirim.',
            quickReplies: []
          };
        } else if (lowerMessage.includes('satÄ±cÄ±')) {
          setChatStep('register_name');
          setRegistrationData({...registrationData, userType: 'seller'});
          return {
            text: 'ğŸª Harika! SatÄ±cÄ± olarak kayÄ±t oluyorsunuz. Firma adÄ±nÄ±z veya kiÅŸisel isminiz nedir?\n\nğŸ“Š Claude olarak satÄ±ÅŸ performansÄ±nÄ±zÄ± analiz edip, bÃ¼yÃ¼me stratejileri Ã¶nereceÄŸim.',
            quickReplies: []
          };
        }
      }
      
      if (chatStep === 'register_name') {
        setChatStep('register_contact');
        setRegistrationData({...registrationData, name: message});
        return {
          text: `Merhaba ${message}! ğŸ“± Telefon numaranÄ±zÄ± alabilir miyim?\n\nğŸ” GÃ¼venlik iÃ§in SMS doÄŸrulama gÃ¶ndereceÄŸim. Claude olarak verilerinizi koruma konusunda Ã§ok titizim.`,
          quickReplies: []
        };
      }
      
      if (chatStep === 'register_contact') {
        setChatStep('register_location');
        setRegistrationData({...registrationData, phone: message});
        return {
          text: 'âœ… SMS doÄŸrulama kodu gÃ¶nderildi! Hangi ÅŸehirde yaÅŸÄ±yorsunuz?\n\nğŸŒ Claude olarak bulunduÄŸunuz bÃ¶lgedeki fÄ±rsatlarÄ± Ã¶zel olarak analiz edeceÄŸim.',
          quickReplies: ['Ä°stanbul', 'Ankara', 'Ä°zmir', 'Bursa', 'Antalya', 'DiÄŸer']
        };
      }
      
      if (chatStep === 'register_location') {
        setChatStep('register_interests');
        setRegistrationData({...registrationData, location: message});
        return {
          text: `Excellent! ${message} iÃ§in yerel pazarÄ± analiz ediyorum...\n\nğŸ¯ Son olarak, hangi kategorilerde alÄ±ÅŸveriÅŸ yapmayÄ± planlÄ±yorsunuz? Bu bilgi ile size Ã¶zel AI Ã¶neriler hazÄ±rlayacaÄŸÄ±m.`,
          quickReplies: ['ğŸš— Otomotiv', 'ğŸ  Emlak', 'ğŸ“± Elektronik', 'ğŸ‘— Moda', 'ğŸ¥ SaÄŸlÄ±k', 'ğŸ“ EÄŸitim']
        };
      }
      
      if (chatStep === 'register_interests') {
        setChatStep(null);
        setIsRegistered(true);
        const userData = {...registrationData, location: message, interests: message};
        return {
          text: `ğŸŠ Tebrikler ${userData.name}! Claude AI ile FindBuyer Ã¼yeliÄŸiniz tamamlandÄ±!\n\nâœ… ${userData.userType === 'buyer' ? 'AlÄ±cÄ±' : 'SatÄ±cÄ±'} profili oluÅŸturuldu\nğŸ“ ${userData.phone} doÄŸrulandÄ±\nğŸ“ ${userData.location} bÃ¶lgesi aktif\nğŸ¯ ${userData.interests} kategorisi analiz ediliyor\n\nğŸ§  Claude AI Ã¶nerilerim hazÄ±r! Åimdi platformun tÃ¼m gÃ¼cÃ¼nÃ¼ deneyimleyin!`,
          quickReplies: ['ğŸ  Ana Sayfaya Git', 'ğŸ“ AI Destekli Talep OluÅŸtur', 'ğŸ” AkÄ±llÄ± SatÄ±cÄ± Arama', 'ğŸ“Š KiÅŸisel Dashboard']
        };
      }
    }
    
    // Platform nasÄ±l Ã§alÄ±ÅŸÄ±r
    if (lowerMessage.includes('nasÄ±l') || lowerMessage.includes('Ã§alÄ±ÅŸÄ±r')) {
      return {
        text: 'ğŸš€ FindBuyer\'Ä±n Claude AI destekli sistemi ÅŸÃ¶yle Ã§alÄ±ÅŸÄ±r:\n\n1ï¸âƒ£ **AkÄ±llÄ± Talep**: AI ile talebinizi optimize ederim\n2ï¸âƒ£ **Otomatik EÅŸleÅŸtirme**: En uygun satÄ±cÄ±larÄ± bulurum\n3ï¸âƒ£ **GerÃ§ek ZamanlÄ± Analiz**: Teklifleri karÅŸÄ±laÅŸtÄ±rÄ±rÄ±m\n4ï¸âƒ£ **Ã–neriler**: Size Ã¶zel tavsiyelerde bulunurum\n5ï¸âƒ£ **7/24 Destek**: Her an yanÄ±nÄ±zdayÄ±m!\n\nğŸ§  Claude olarak her adÄ±mda size rehberlik ederim.',
        quickReplies: ['ğŸ“ Talep OluÅŸtur', 'ğŸ” SatÄ±cÄ± Ara', 'ğŸ’¡ AI Ã–nerilerimi GÃ¶r', 'ğŸ†˜ Acil Durum Sistemi']
      };
    }
    
    // Ana sayfa yÃ¶nlendirme
    if (lowerMessage.includes('ana sayfa') || lowerMessage.includes('home') || lowerMessage.includes('dashboard')) {
      setCurrentScreen('home');
      return {
        text: 'ğŸ  Ana sayfaya yÃ¶nlendiriliyorsunuz! Claude AI dashboard\'unuzda kiÅŸisel Ã¶nerilerinizi gÃ¶rebilirsiniz.',
        quickReplies: []
      };
    }
    
    // Acil durum yardÄ±mÄ±
    if (lowerMessage.includes('acil') || lowerMessage.includes('ambulans') || lowerMessage.includes('hasta') || lowerMessage.includes('emergency')) {
      return {
        text: 'ğŸš¨ ACÄ°L DURUM TESPÄ°T EDÄ°LDÄ°!\n\nClaude AI olarak size hemen yardÄ±m ediyorum:\n\nğŸ¥ **SaÄŸlÄ±k Acili**: Ambulans, hasta nakli (2 dk yanÄ±t)\nğŸš— **UlaÅŸÄ±m Acili**: Taksi, Ã§ekici (5 dk yanÄ±t)\nğŸ  **BarÄ±nma Acili**: Konaklama, gÃ¼venlik\nâš¡ **Teknik Acil**: Elektrik, Ã§ilingir\n\nğŸ¦¸â€â™‚ï¸ Acil durum kahramanlarÄ±mÄ±z aktif bekliyorlar!',
        quickReplies: ['ğŸš‘ SAÄLIK ACÄ°LÄ°', 'ğŸš— ULAÅIM ACÄ°LÄ°', 'ğŸ  BARINMA ACÄ°LÄ°', 'âš¡ TEKNÄ°K ACÄ°L'],
        type: 'emergency'
      };
    }
    
    // KÃ¼me oluÅŸturma
    if (lowerMessage.includes('kÃ¼me') || lowerMessage.includes('grup') || lowerMessage.includes('birlikte') || lowerMessage.includes('toplu')) {
      return {
        text: 'ğŸ‘¥ Claude AI KÃ¼me Sistemi aktif!\n\nğŸ›’ **AlÄ±cÄ± KÃ¼meleri**:\nâ€¢ %30\'a varan toplu indirimler\nâ€¢ AI destekli grup oluÅŸturma\nâ€¢ ArkadaÅŸ davet sistemi\n\nğŸª **SatÄ±cÄ± KÃ¼meleri**:\nâ€¢ BÃ¼yÃ¼k sipariÅŸleri karÅŸÄ±lama\nâ€¢ Risk ve kÃ¢r paylaÅŸÄ±mÄ±\nâ€¢ AI koordinasyonu\n\nğŸ§  Size en uygun kÃ¼meyi bulayÄ±m mÄ±?',
        quickReplies: ['ğŸ›’ AlÄ±cÄ± KÃ¼mesi OluÅŸtur', 'ğŸª SatÄ±cÄ± KÃ¼mesi OluÅŸtur', 'ğŸ” Mevcut KÃ¼meleri GÃ¶r', 'ğŸ’¡ AI KÃ¼me Ã–nerisi']
      };
    }
    
    // Talep oluÅŸturma yardÄ±mÄ±
    if (lowerMessage.includes('talep') || lowerMessage.includes('oluÅŸtur') || lowerMessage.includes('ihtiyaÃ§')) {
      return {
        text: 'ğŸ“ Claude AI Talep AsistanÄ± aktif!\n\nğŸ¯ Size Ã¶zel talep oluÅŸturalÄ±m:\n\n1ï¸âƒ£ **AkÄ±llÄ± Kategori SeÃ§imi**\n2ï¸âƒ£ **BÃ¼tÃ§e Optimizasyonu**\n3ï¸âƒ£ **Otomatik AÃ§Ä±klama**\n4ï¸âƒ£ **SatÄ±cÄ± EÅŸleÅŸtirme**\n5ï¸âƒ£ **Teklif Analizi**\n\nğŸ§  Ne aramak istiyorsunuz? Claude olarak en detaylÄ± ÅŸekilde yardÄ±mcÄ± olacaÄŸÄ±m!',
        quickReplies: ['ğŸš— AraÃ§ ArÄ±yorum', 'ğŸ  Ev ArÄ±yorum', 'ğŸ’» Hizmet ArÄ±yorum', 'ğŸ“± ÃœrÃ¼n ArÄ±yorum', 'âœ¨ AI Ã–ner']
      };
    }
    
    // SatÄ±cÄ± arama
    if (lowerMessage.includes('satÄ±cÄ±') || lowerMessage.includes('firma') || lowerMessage.includes('ÅŸirket')) {
      return {
        text: 'ğŸ” Claude AI SatÄ±cÄ± Analizi baÅŸlatÄ±lÄ±yor...\n\nğŸ“Š **AkÄ±llÄ± Filtreleme**:\nâ€¢ GÃ¼venilirlik skoru\nâ€¢ MÃ¼ÅŸteri memnuniyeti\nâ€¢ YanÄ±t hÄ±zÄ± analizi\nâ€¢ Fiyat performansÄ±\nâ€¢ GeÃ§miÅŸ baÅŸarÄ±lar\n\nğŸ† Size en uygun satÄ±cÄ±larÄ± AI algoritmasÄ± ile buluyorum!',
        quickReplies: ['ğŸ¥‡ En Ä°yi SatÄ±cÄ±lar', 'âš¡ HÄ±zlÄ± YanÄ±t Verenler', 'ğŸ’° En Uygun FiyatlÄ±', 'ğŸ›¡ï¸ GÃ¼venli SatÄ±cÄ±lar']
      };
    }
    
    // KiÅŸisel asistan Ã¶zellikler
    if (lowerMessage.includes('claude') || lowerMessage.includes('ai') || lowerMessage.includes('asistan')) {
      return {
        text: 'ğŸ§  Claude AI Ã¶zelliklerin:\n\nğŸ¯ **KiÅŸisel AlÄ±ÅŸveriÅŸ AsistanÄ±**\nğŸ“Š **GerÃ§ek ZamanlÄ± Pazar Analizi**\nğŸ”® **Fiyat Tahmin Modeli**\nğŸ›¡ï¸ **DolandÄ±rÄ±cÄ±lÄ±k KorumasÄ±**\nğŸ“± **7/24 AnlÄ±k Destek**\nğŸ¤ **MÃ¼zakere YardÄ±mcÄ±sÄ±**\nğŸ“ˆ **SatÄ±ÅŸ Performans Analizi**\n\nâœ¨ Hangi Claude Ã¶zelliÄŸimi deneyimlemek istersiniz?',
        quickReplies: ['ğŸ”® Fiyat Tahmini', 'ğŸ›¡ï¸ GÃ¼venlik KontrolÃ¼', 'ğŸ¤ MÃ¼zakere YardÄ±mÄ±', 'ğŸ“Š Pazar Analizi']
      };
    }
    
    // Default karÅŸÄ±lama - Claude introduction
    if (lowerMessage.includes('merhaba') || lowerMessage.includes('selam') || lowerMessage.includes('hello') || !chatMessages.length) {
      return {
        text: 'ğŸ‘‹ Merhaba! Ben Claude, FindBuyer\'Ä±n yapay zeka asistanÄ±yÄ±m!\n\nğŸ§  **Claude AI Yeteneklerim**:\nâœ¨ Form doldurmadan konuÅŸarak Ã¼yelik\nğŸ¯ KiÅŸiselleÅŸtirilmiÅŸ alÄ±ÅŸveriÅŸ deneyimi\nğŸ“Š GerÃ§ek zamanlÄ± pazar analizi\nğŸ›¡ï¸ 7/24 gÃ¼venlik ve destek\nğŸš¨ Acil durum mÃ¼dahale sistemi\n\nğŸš€ Size nasÄ±l yardÄ±mcÄ± olabilirim?',
        quickReplies: ['ğŸ” KayÄ±t Ol (Claude ile)', 'â“ Platform NasÄ±l Ã‡alÄ±ÅŸÄ±r?', 'ğŸ†˜ Acil Durum', 'ğŸ‘¥ AI KÃ¼me Sistemi', 'ğŸ§  Claude Ã–zellikler'],
        type: 'welcome'
      };
    }
    
    // Fiyat tahmini
    if (lowerMessage.includes('fiyat') || lowerMessage.includes('tahmin') || lowerMessage.includes('analiz')) {
      return {
        text: 'ğŸ”® Claude AI Fiyat Tahmin Motoru aktif!\n\nğŸ“Š **Analiz Parametreleri**:\nâ€¢ GeÃ§miÅŸ fiyat trendleri\nâ€¢ Sezonsal dalgalanmalar\nâ€¢ Rekabet analizi\nâ€¢ Pazar doygunluÄŸu\nâ€¢ Talep/arz dengesi\n\nğŸ’¡ Hangi Ã¼rÃ¼n/hizmet iÃ§in fiyat analizi yapmamÄ± istersiniz?',
        quickReplies: ['ğŸš— AraÃ§ Fiyat Analizi', 'ğŸ  Emlak DeÄŸerleme', 'ğŸ“± Elektronik Trend', 'ğŸ’¼ Hizmet FiyatlarÄ±']
      };
    }
    
    // Genel AI yardÄ±m
    return {
      text: 'ğŸ¤– Claude AI olarak size yardÄ±mcÄ± olmak iÃ§in buradayÄ±m!\n\nğŸ’« **PopÃ¼ler Komutlar**:\nâ€¢ "kayÄ±t ol" - HÄ±zlÄ± Ã¼yelik\nâ€¢ "talep oluÅŸtur" - AI destekli talep\nâ€¢ "satÄ±cÄ± ara" - AkÄ±llÄ± eÅŸleÅŸtirme\nâ€¢ "acil durum" - AnÄ±nda yardÄ±m\nâ€¢ "fiyat analizi" - Pazar tahmini\n\nğŸ¯ Ne yapmak istiyorsunuz?',
      quickReplies: ['ğŸ” KayÄ±t Ol', 'ğŸ“ Talep OluÅŸtur', 'ğŸ” SatÄ±cÄ± Ara', 'ğŸ†˜ Acil Durum', 'ğŸ§  AI Ã–zellikler']
    };
  };

  // Quick reply tÄ±klama
  const handleQuickReply = (reply) => {
    const userMessage = { text: reply, sender: 'user', timestamp: new Date() };
    setChatMessages(prev => [...prev, userMessage]);

    // Claude typing indicator
    setChatMessages(prev => [...prev, { 
      text: 'ğŸ§  Claude dÃ¼ÅŸÃ¼nÃ¼yor...', 
      sender: 'bot', 
      timestamp: new Date(), 
      isTyping: true 
    }]);

    setTimeout(() => {
      setChatMessages(prev => prev.filter(msg => !msg.isTyping));
      
      const botResponse = generateBotResponse(reply);
      setChatMessages(prev => [...prev, { 
        text: botResponse.text, 
        sender: 'bot', 
        timestamp: new Date(), 
        quickReplies: botResponse.quickReplies,
        type: botResponse.type
      }]);
    }, 1500);
  };

  // Ãœyelik seviyesi badge'i
  const getMembershipBadge = (level) => {
    const badges = {
      diamond: { icon: 'ğŸ’', name: 'Diamond', color: 'from-purple-500 to-pink-500' },
      platinum: { icon: 'ğŸ¥‡', name: 'Platinum', color: 'from-gray-400 to-gray-600' },
      gold: { icon: 'ğŸ¥ˆ', name: 'Gold', color: 'from-yellow-400 to-yellow-600' },
      silver: { icon: 'ğŸ¥‰', name: 'Silver', color: 'from-gray-300 to-gray-500' },
      hero: { icon: 'ğŸ¦¸â€â™‚ï¸', name: 'Hero', color: 'from-red-500 to-red-700' },
      free: { icon: 'ğŸ†“', name: 'Free', color: 'from-gray-200 to-gray-400' }
    };
    return badges[level] || badges.free;
  };

  // Aciliyet badge'i
  const getUrgencyBadge = (urgency, isEmergency) => {
    if (isEmergency) {
      return { icon: 'ğŸš¨', text: 'ACÄ°L DURUM', color: 'bg-red-600 text-white animate-pulse' };
    }
    
    const badges = {
      high: { icon: 'ğŸ”¥', text: 'YÃ¼ksek', color: 'bg-orange-500 text-white' },
      medium: { icon: 'âš¡', text: 'Orta', color: 'bg-yellow-500 text-white' },
      low: { icon: 'ğŸ“…', text: 'Normal', color: 'bg-green-500 text-white' }
    };
    return badges[urgency] || badges.low;
  };

  // 3D Card Component
  const Card3D = ({ children, className = "" }) => {
    const [transform, setTransform] = useState('');

    const handleMouseMove = (e) => {
      const rect = e.currentTarget.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      const rotateX = (y - centerY) / 15;
      const rotateY = (centerX - x) / 15;

      setTransform(`perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`);
    };

    const handleMouseLeave = () => {
      setTransform('');
    };

    return (
      <div
        className={`transition-all duration-500 ${className}`}
        style={{ transform, transformStyle: 'preserve-3d' }}
        onMouseMove={handleMouseMove}
        onMouseLeave={handleMouseLeave}
      >
        {children}
      </div>
    );
  };

  // Header Component
  const Header = () => (
    <header className="sticky top-0 z-50 bg-gradient-to-r from-orange-500 to-orange-600 shadow-2xl">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <div 
            className="flex items-center cursor-pointer"
            onClick={() => setCurrentScreen('welcome')}
          >
            <div className="text-3xl font-black text-white">
              ğŸ›ï¸ FindBuyer
            </div>
            <div className="ml-2 text-sm text-orange-200">
              AlÄ±cÄ± OdaklÄ± Platform
            </div>
          </div>
          
          <nav className="hidden md:flex space-x-6">
            <button
              onClick={() => setCurrentScreen('home')}
              className="text-white hover:text-orange-200 flex items-center gap-2 font-medium transition-all hover:scale-105"
            >
              <Home size={18} />
              Ana Sayfa
            </button>
            <button
              onClick={() => setCurrentScreen('requests')}
              className="text-white hover:text-orange-200 flex items-center gap-2 font-medium transition-all hover:scale-105"
            >
              <Package size={18} />
              Talepler
            </button>
            <button
              onClick={() => setCurrentScreen('sellers')}
              className="text-white hover:text-orange-200 flex items-center gap-2 font-medium transition-all hover:scale-105"
            >
              <User size={18} />
              SatÄ±cÄ±lar
            </button>
            <button
              onClick={() => setShowEmergencyModal(true)}
              className="text-white hover:text-orange-200 flex items-center gap-2 font-medium transition-all hover:scale-105"
            >
              <AlertTriangle size={18} />
              Acil Durum
            </button>
          </nav>
          
          <div className="flex items-center space-x-4">
            <div className="hidden md:flex items-center space-x-3">
              <button className="bg-white/20 text-white px-3 py-2 rounded-xl font-bold hover:bg-white/30 transition-all flex items-center gap-1">
                <Bell size={16} />
                <span className="bg-red-500 text-xs px-1 rounded-full">3</span>
              </button>
              <button className="bg-white/20 text-white px-3 py-2 rounded-xl font-bold hover:bg-white/30 transition-all">
                <Settings size={16} />
              </button>
            </div>
            <button
              onClick={() => setShowChatbot(true)}
              className="bg-gradient-to-r from-blue-500 via-purple-500 to-blue-600 text-white px-4 py-2 rounded-xl font-bold hover:shadow-lg transition-all hover:scale-105 flex items-center gap-2"
            >
              <div className="relative">
                ğŸ§ 
                <div className="absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
              </div>
              Claude AI
            </button>
            <div className="bg-white/20 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2">
              {getMembershipBadge(userMembership).icon}
              {userType === 'buyer' ? 'ğŸ›’ AlÄ±cÄ±' : 'ğŸª SatÄ±cÄ±'}
            </div>
          </div>
        </div>
      </div>
    </header>
  );

  // Welcome Screen
  const WelcomeScreen = () => (
    <div className="min-h-screen bg-gradient-to-br from-orange-50 to-orange-100">
      <div className="container mx-auto px-4 py-12">
        <div className="text-center mb-12">
          <h1 className="text-6xl font-black text-gray-800 mb-4" style={{ textShadow: '2px 2px 4px rgba(0,0,0,0.1)' }}>
            FindBuyer'a HoÅŸ Geldiniz! ğŸ‰
          </h1>
          <p className="text-2xl text-gray-600 mb-4">
            DÃ¼nya'nÄ±n ilk alÄ±cÄ± odaklÄ± pazaryeri!
          </p>
          <p className="text-lg text-gray-500">
            SatÄ±cÄ±lar sizin iÃ§in yarÄ±ÅŸsÄ±n, en iyi teklifi alÄ±n!
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
          {categories.map((category, index) => (
            <Card3D key={category.id}>
              <div
                className={`bg-gradient-to-br ${category.color} p-8 rounded-3xl text-white cursor-pointer shadow-2xl hover:shadow-3xl transition-all duration-500`}
                onClick={() => {
                  setSelectedCategory(category.id);
                  setCurrentScreen('requests');
                }}
                style={{ animationDelay: `${index * 100}ms` }}
              >
                <div className="text-6xl mb-4 text-center">{category.icon}</div>
                <h3 className="text-2xl font-black text-center">{category.name}</h3>
                <p className="text-center mt-2 opacity-90">
                  {category.name} kategorisindeki talepleri keÅŸfet
                </p>
              </div>
            </Card3D>
          ))}
        </div>

        <div className="text-center space-y-6">
          <Card3D>
            <button
              onClick={() => setCurrentScreen('home')}
              className="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-12 py-4 rounded-2xl text-xl font-black shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105"
            >
              <Sparkles size={24} className="inline mr-3" />
              Hemen BaÅŸla
            </button>
          </Card3D>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <Card3D>
              <div className="bg-white p-6 rounded-2xl shadow-xl">
                <div className="text-4xl mb-3">ğŸ†˜</div>
                <h3 className="font-bold text-lg mb-2">Acil Durum DesteÄŸi</h3>
                <p className="text-gray-600">24/7 acil durumlarÄ±nÄ±zda yanÄ±nÄ±zdayÄ±z</p>
              </div>
            </Card3D>
            <Card3D>
              <div className="bg-white p-6 rounded-2xl shadow-xl">
                <div className="text-4xl mb-3">ğŸ‘¥</div>
                <h3 className="font-bold text-lg mb-2">KÃ¼me AlÄ±ÅŸveriÅŸi</h3>
                <p className="text-gray-600">ArkadaÅŸlarÄ±nÄ±zla birlikte daha ucuza alÄ±n</p>
              </div>
            </Card3D>
            <Card3D>
              <div className="bg-white p-6 rounded-2xl shadow-xl">
                <div className="text-4xl mb-3">ğŸ¤–</div>
                <h3 className="font-bold text-lg mb-2">AI Asistan</h3>
                <p className="text-gray-600">Yapay zeka destekli akÄ±llÄ± alÄ±ÅŸveriÅŸ</p>
              </div>
            </Card3D>
          </div>
        </div>
      </div>
    </div>
  );

  // Home Dashboard
  const HomeDashboard = () => (
    <div className="min-h-screen bg-gray-50">
      <div className="container mx-auto px-4 py-8">
        {/* Hero Section - Enhanced */}
        <Card3D>
          <div 
            className="relative overflow-hidden rounded-3xl shadow-2xl mb-8"
            style={{
              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
              transform: `translateY(${scrollY * 0.05}px)`
            }}
          >
            <div className="absolute inset-0 opacity-20">
              <div className="absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl animate-pulse"></div>
              <div className="absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl animate-pulse delay-1000"></div>
              <div className="absolute top-1/2 left-1/2 w-64 h-64 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full blur-2xl animate-spin-slow"></div>
            </div>
            
            <div className="relative p-12 text-white">
              <div className="flex items-center gap-3 mb-4">
                <div className="relative">
                  <div className="text-6xl animate-bounce">ğŸ§ </div>
                  <div className="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-ping">
                    <div className="w-3 h-3 bg-green-400 rounded-full"></div>
                  </div>
                </div>
                <div>
                  <span className="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-bold">
                    âœ¨ Claude AI Destekli Platform
                  </span>
                </div>
              </div>
              <h2 className="text-6xl font-black mb-6" style={{ textShadow: '3px 3px 6px rgba(0,0,0,0.3)' }}>
                Hayalinizdeki ÃœrÃ¼nÃ¼ BulalÄ±m! âœ¨
              </h2>
              <p className="text-2xl mb-8 opacity-90">
                ğŸ¤– Claude AI ile akÄ±llÄ± alÄ±ÅŸveriÅŸ deneyimi yaÅŸayÄ±n!
              </p>
              
              <div className="flex gap-4 max-w-4xl">
                <div className="flex-1 relative">
                  <Search className="absolute left-4 top-4 text-purple-600" size={24} />
                  <input
                    type="text"
                    placeholder="Claude AI ile ne arÄ±yorsunuz?"
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className="w-full pl-14 pr-6 py-4 rounded-2xl text-gray-800 font-medium shadow-lg focus:outline-none focus:ring-4 focus:ring-purple-300 text-lg backdrop-blur-sm bg-white/90"
                  />
                  <div className="absolute right-4 top-4 text-purple-600">
                    <Sparkles size={20} className="animate-pulse" />
                  </div>
                </div>
                <button
                  onClick={() => setCurrentScreen('requests')}
                  className="bg-gradient-to-r from-blue-500 via-purple-500 to-blue-600 text-white px-8 py-4 rounded-2xl font-black shadow-lg hover:shadow-xl transition-all hover:scale-105"
                >
                  ğŸ§  Claude ile Ara
                </button>
              </div>
              
              <div className="mt-8 flex items-center gap-6">
                <div className="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">
                  <div className="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                  <span className="text-sm font-medium">Claude AI Aktif</span>
                </div>
                <div className="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">
                  <div className="w-3 h-3 bg-blue-400 rounded-full animate-pulse"></div>
                  <span className="text-sm font-medium">7/24 Destek</span>
                </div>
                <div className="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">
                  <div className="w-3 h-3 bg-purple-400 rounded-full animate-pulse"></div>
                  <span className="text-sm font-medium">AnlÄ±k Analiz</span>
                </div>
              </div>
            </div>
          </div>
        </Card3D>

        {/* Quick Stats */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          {[
            { icon: <TrendingUp />, label: "Aktif Talepler", value: "2,547", color: "from-blue-400 to-blue-600" },
            { icon: <Zap />, label: "GÃ¼nlÃ¼k EÅŸleÅŸme", value: "423", color: "from-green-400 to-green-600" },
            { icon: <Award />, label: "Mutlu MÃ¼ÅŸteri", value: "98.7%", color: "from-purple-400 to-purple-600" },
            { icon: <Users />, label: "Aktif SatÄ±cÄ±", value: "1,289", color: "from-orange-400 to-orange-600" }
          ].map((stat, index) => (
            <Card3D key={index}>
              <div className={`bg-gradient-to-br ${stat.color} p-6 rounded-2xl text-white shadow-xl`}>
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-white/80 font-medium">{stat.label}</p>
                    <p className="text-3xl font-black mt-1">{stat.value}</p>
                  </div>
                  <div className="bg-white/20 p-3 rounded-xl">
                    {React.cloneElement(stat.icon, { size: 28 })}
                  </div>
                </div>
              </div>
            </Card3D>
          ))}
        </div>

        {/* Son Talepler */}
        <Card3D>
          <div className="bg-white rounded-3xl shadow-xl p-8">
            <div className="flex justify-between items-center mb-6">
              <h3 className="text-2xl font-black text-gray-800">ğŸ”¥ PopÃ¼ler Talepler</h3>
              <button
                onClick={() => setCurrentScreen('requests')}
                className="text-orange-600 hover:text-orange-700 font-bold"
              >
                TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
              </button>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {sortedRequests.slice(0, 6).map((request, index) => (
                <Card3D key={request.id}>
                  <div className="bg-gradient-to-br from-gray-50 to-white p-6 rounded-2xl border-2 border-orange-100 hover:border-orange-300 transition-all cursor-pointer">
                    <div className="flex justify-between items-start mb-3">
                      <span className="bg-gradient-to-r from-orange-400 to-orange-600 text-white px-3 py-1 rounded-lg text-sm font-bold">
                        {request.category}
                      </span>
                      <span className={`px-2 py-1 rounded-full text-xs font-bold ${getUrgencyBadge(request.urgency, request.isEmergency).color}`}>
                        {getUrgencyBadge(request.urgency, request.isEmergency).icon} {getUrgencyBadge(request.urgency, request.isEmergency).text}
                      </span>
                    </div>
                    <h4 className="text-lg font-black text-gray-800 mb-2">{request.title}</h4>
                    <p className="text-gray-600 text-sm mb-3 line-clamp-2">{request.description}</p>
                    <div className="flex justify-between items-center">
                      <span className="text-2xl font-black text-orange-600">
                        {request.budget.toLocaleString()} â‚º
                      </span>
                      <span className="text-sm text-gray-500">
                        {request.offerCount} teklif
                      </span>
                    </div>
                  </div>
                </Card3D>
              ))}
            </div>
          </div>
        </Card3D>
      </div>
    </div>
  );

  // Requests Screen
  const RequestsScreen = () => (
    <div className="min-h-screen bg-gray-50">
      <div className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h2 className="text-3xl font-black text-gray-800 mb-4">ğŸ¯ Aktif Talepler</h2>
          
          {/* Filtreler */}
          <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
              <div className="relative">
                <Search className="absolute left-3 top-3 text-gray-400" size={20} />
                <input
                  type="text"
                  placeholder="Talep ara..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all"
                />
              </div>
              
              <select
                value={selectedCategory}
                onChange={(e) => setSelectedCategory(e.target.value)}
                className="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all"
              >
                <option value="all">ğŸ¯ TÃ¼m Kategoriler</option>
                <option value="otomotiv">ğŸš— Otomotiv</option>
                <option value="emlak">ğŸ  Emlak</option>
                <option value="hizmet">âš¡ Hizmetler</option>
                <option value="elektronik">ğŸ“± Elektronik</option>
                <option value="saÄŸlÄ±k">ğŸ¥ SaÄŸlÄ±k</option>
                <option value="ulaÅŸÄ±m">ğŸš• UlaÅŸÄ±m</option>
              </select>
              
              <select className="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all">
                <option>ğŸ’° TÃ¼m BÃ¼tÃ§eler</option>
                <option>0 - 10.000 â‚º</option>
                <option>10.000 - 50.000 â‚º</option>
                <option>50.000 - 100.000 â‚º</option>
                <option>100.000+ â‚º</option>
              </select>
              
              <select className="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 transition-all">
                <option>âš¡ TÃ¼m Aciliyet</option>
                <option>ğŸš¨ Acil Durum</option>
                <option>ğŸ”¥ YÃ¼ksek</option>
                <option>âš¡ Orta</option>
                <option>ğŸ“… Normal</option>
              </select>
            </div>
          </div>
        </div>

        {/* Talep Listesi */}
        <div className="space-y-6">
          {sortedRequests.map((request, index) => (
            <Card3D key={request.id}>
              <div className={`bg-white rounded-2xl shadow-xl p-8 border-2 transition-all ${
                request.isEmergency 
                  ? 'border-red-300 bg-red-50' 
                  : 'border-orange-100 hover:border-orange-300'
              }`}>
                <div className="flex justify-between items-start mb-4">
                  <div className="flex-1">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="bg-gradient-to-r from-orange-400 to-orange-600 text-white px-4 py-2 rounded-lg font-bold">
                        {request.category}
                      </span>
                      <span className="text-gray-500 flex items-center gap-1">
                        <MapPin size={16} />
                        {request.location}
                      </span>
                      <span className={`px-3 py-1 rounded-full text-sm font-bold ${getUrgencyBadge(request.urgency, request.isEmergency).color}`}>
                        {getUrgencyBadge(request.urgency, request.isEmergency).icon} {getUrgencyBadge(request.urgency, request.isEmergency).text}
                      </span>
                      {request.verified && (
                        <span className="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1">
                          <CheckCircle size={12} />
                          DoÄŸrulandÄ±
                        </span>
                      )}
                    </div>
                    <h3 className="text-2xl font-black text-gray-800 mb-3">{request.title}</h3>
                    <p className="text-gray-600 mb-4 leading-relaxed">{request.description}</p>
                    {request.isEmergency && request.proofDocument && (
                      <div className="bg-red-100 border border-red-300 rounded-lg p-3 mb-4">
                        <span className="text-red-700 font-bold text-sm">
                          ğŸ¥ {request.proofDocument}
                        </span>
                      </div>
                    )}
                    <div className="flex items-center gap-6 text-sm text-gray-500">
                      <span className="flex items-center gap-1">
                        <Calendar size={16} />
                        Son: {new Date(request.deadline).toLocaleDateString('tr-TR')}
                      </span>
                      <span className="flex items-center gap-1">
                        <Eye size={16} />
                        {request.offerCount} teklif
                      </span>
                      <span className="flex items-center gap-1">
                        <Clock size={16} />
                        {new Date(request.createdAt).toLocaleDateString('tr-TR')}
                      </span>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-4xl font-black text-orange-600 mb-2">
                      {request.budget.toLocaleString()} â‚º
                    </div>
                    <div className="space-y-2">
                      <button 
                        onClick={() => setSelectedRequest(request)}
                        className="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-3 rounded-xl font-bold hover:shadow-xl hover:scale-105 transition-all block w-full"
                      >
                        ğŸ“‹ DetaylarÄ± GÃ¶r
                      </button>
                      {userType === 'seller' && (
                        <button 
                          className={`px-6 py-3 rounded-xl font-bold hover:shadow-xl hover:scale-105 transition-all block w-full ${
                            request.isEmergency 
                              ? 'bg-gradient-to-r from-red-500 to-red-600 text-white'
                              : 'bg-gradient-to-r from-green-500 to-green-600 text-white'
                          }`}
                        >
                          {request.isEmergency ? 'ğŸš¨ ACÄ°L TEKLÄ°F VER' : 'ğŸ’° Teklif Ver'}
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            </Card3D>
          ))}
        </div>
      </div>
    </div>
  );

  // Sellers Screen
  const SellersScreen = () => (
    <div className="min-h-screen bg-gray-50">
      <div className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h2 className="text-3xl font-black text-gray-800 mb-4">ğŸª DoÄŸrulanmÄ±ÅŸ SatÄ±cÄ±lar</h2>
          <p className="text-gray-600">En iyi satÄ±cÄ±larÄ±mÄ±zÄ± keÅŸfedin ve onlarla direkt iletiÅŸime geÃ§in.</p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {mockSellers.map((seller, index) => (
            <Card3D key={seller.id}>
              <div className="bg-white rounded-3xl shadow-xl p-8 border-2 border-orange-100 hover:border-orange-300 transition-all">
                <div className="text-center mb-6">
                  <div className="text-6xl mb-4">{seller.avatar}</div>
                  <div className="flex items-center justify-center gap-2 mb-2">
                    <h3 className="text-xl font-black text-gray-800">{seller.name}</h3>
                    {seller.verified && (
                      <CheckCircle className="text-green-500" size={20} />
                    )}
                    <div className={`px-2 py-1 rounded-lg text-xs font-bold text-white bg-gradient-to-r ${getMembershipBadge(seller.badge).color}`}>
                      {getMembershipBadge(seller.badge).icon} {getMembershipBadge(seller.badge).name}
                    </div>
                  </div>
                  <span className="bg-gradient-to-r from-orange-400 to-orange-600 text-white px-3 py-1 rounded-lg text-sm font-bold">
                    {seller.category}
                  </span>
                  {seller.emergencyHero && (
                    <div className="mt-2">
                      <span className="bg-gradient-to-r from-red-500 to-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold">
                        ğŸ¦¸â€â™‚ï¸ Acil Durum KahramanÄ±
                      </span>
                    </div>
                  )}
                </div>

                <div className="space-y-4 mb-6">
                  <div className="flex items-center justify-between">
                    <span className="text-gray-600">â­ DeÄŸerlendirme</span>
                    <div className="flex items-center gap-1">
                      <Star className="text-yellow-500 fill-current" size={16} />
                      <span className="font-bold">{seller.rating}</span>
                      <span className="text-gray-500">({seller.reviewCount})</span>
                    </div>
                  </div>
                  
                  <div className="flex items-center justify-between">
                    <span className="text-gray-600">ğŸ“ Konum</span>
                    <span className="font-medium">{seller.location}</span>
                  </div>
                  
                  <div className="flex items-center justify-between">
                    <span className="text-gray-600">âš¡ YanÄ±t SÃ¼resi</span>
                    <span className="font-medium">{seller.responseTime}</span>
                  </div>
                  
                  <div className="flex items-center justify-between">
                    <span className="text-gray-600">âœ… Tamamlanan</span>
                    <span className="font-medium">{seller.completedProjects} proje</span>
                  </div>

                  {seller.clusterMember && (
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
                      <span className="text-blue-700 font-bold text-sm">
                        ğŸ‘¥ KÃ¼me Ãœyesi - BÃ¼yÃ¼k sipariÅŸleri karÅŸÄ±layabilir
                      </span>
                    </div>
                  )}

                  {seller.emergencyHero && seller.heroStats && (
                    <div className="bg-red-50 border border-red-200 rounded-lg p-3">
                      <div className="text-red-700 font-bold text-sm mb-2">ğŸ¦¸â€â™‚ï¸ Kahraman Ä°statistikleri:</div>
                      <div className="text-xs space-y-1">
                        <div>â¤ï¸ {seller.heroStats.livesHelped} kiÅŸiye yardÄ±m etti</div>
                        <div>âš¡ {seller.heroStats.emergencyResponse} yanÄ±t sÃ¼resi</div>
                        <div>ğŸ¯ {seller.heroStats.successRate} baÅŸarÄ± oranÄ±</div>
                      </div>
                    </div>
                  )}
                </div>

                <div className="mb-6">
                  <div className="text-sm text-gray-600 mb-2">ğŸ† UzmanlÄ±k AlanlarÄ±:</div>
                  <div className="flex flex-wrap gap-2">
                    {seller.specialties.map((specialty, idx) => (
                      <span key={idx} className="bg-orange-100 text-orange-700 px-2 py-1 rounded-lg text-xs font-medium">
                        {specialty}
                      </span>
                    ))}
                  </div>
                </div>

                <div className="space-y-3">
                  <button className="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 rounded-xl font-bold hover:shadow-xl hover:scale-105 transition-all">
                    ğŸ’¬ Mesaj GÃ¶nder
                  </button>
                  <button className="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-xl font-bold hover:shadow-xl hover:scale-105 transition-all">
                    ğŸ“ Hemen Ara
                  </button>
                </div>
              </div>
            </Card3D>
          ))}
        </div>
      </div>
    </div>
  );

  // Chatbot Component - Claude AI Enhanced
  const Chatbot = () => (
    <div className="fixed bottom-4 right-4 z-50">
      {showChatbot ? (
        <Card3D>
          <div className="bg-gradient-to-br from-white to-blue-50 rounded-3xl shadow-2xl w-96 h-[700px] flex flex-col border-2 border-blue-200 overflow-hidden">
            {/* Header dengan Claude branding */}
            <div className="bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 text-white p-6 rounded-t-3xl relative overflow-hidden">
              <div className="absolute inset-0 opacity-20">
                <div className="absolute -top-10 -right-10 w-32 h-32 bg-white rounded-full blur-2xl animate-pulse"></div>
                <div className="absolute -bottom-10 -left-10 w-32 h-32 bg-white rounded-full blur-2xl animate-pulse delay-1000"></div>
              </div>
              <div className="relative flex justify-between items-center">
                <div>
                  <h3 className="font-black text-xl flex items-center gap-2">
                    ğŸ§  Claude AI 
                    <span className="text-xs bg-white/20 px-2 py-1 rounded-full">LIVE</span>
                  </h3>
                  <p className="text-blue-100 text-sm animate-pulse">FindBuyer Yapay Zeka AsistanÄ±</p>
                  <div className="flex items-center gap-1 mt-1">
                    <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span className="text-xs text-blue-100">7/24 Aktif</span>
                  </div>
                </div>
                <button
                  onClick={() => setShowChatbot(false)}
                  className="hover:bg-blue-700 rounded-full p-2 transition-all transform hover:scale-110"
                >
                  <X size={20} />
                </button>
              </div>
            </div>
            
            {/* Chat messages area */}
            <div className="flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-blue-50/50 to-white">
              {chatMessages.length === 0 && (
                <div className="text-center py-8">
                  <div className="relative mb-6">
                    <div className="text-8xl animate-bounce">ğŸ§ </div>
                    <div className="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-ping">
                      <div className="w-3 h-3 bg-green-400 rounded-full"></div>
                    </div>
                  </div>
                  <div className="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg mb-4">
                    <p className="font-bold mb-2">ğŸ‘‹ Merhaba! Ben Claude AI</p>
                    <p className="text-sm opacity-90">FindBuyer'Ä±n yapay zeka asistanÄ±yÄ±m. Size nasÄ±l yardÄ±mcÄ± olabilirim?</p>
                  </div>
                  <div className="space-y-2">
                    {['ğŸ” Claude ile KayÄ±t Ol', 'ğŸ§  AI Ã–zelliklerimi KeÅŸfet', 'ğŸ†˜ Acil Durum Sistemi', 'ğŸ‘¥ AkÄ±llÄ± KÃ¼me OluÅŸtur'].map((reply, idx) => (
                      <button
                        key={idx}
                        onClick={() => handleQuickReply(reply)}
                        className="block w-full text-left px-4 py-3 bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl hover:from-blue-200 hover:to-purple-200 transition-all border border-blue-200 font-medium transform hover:scale-105"
                      >
                        {reply}
                      </button>
                    ))}
                  </div>
                </div>
              )}
              
              {chatMessages.map((message, index) => (
                <div key={index} className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                  <div className={`max-w-xs px-4 py-3 rounded-2xl transform hover:scale-105 transition-all ${
                    message.sender === 'user' 
                      ? 'bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg' 
                      : message.isTyping
                      ? 'bg-gradient-to-r from-gray-200 to-gray-300 text-gray-600 animate-pulse'
                      : message.type === 'emergency'
                      ? 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg animate-pulse'
                      : message.type === 'registration' 
                      ? 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg'
                      : 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg border border-blue-200'
                  }`}>
                    {message.sender === 'bot' && !message.isTyping && (
                      <div className="flex items-center gap-2 mb-2">
                        <div className="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center">
                          ğŸ§ 
                        </div>
                        <span className="text-xs opacity-80">Claude AI</span>
                      </div>
                    )}
                    <p className="whitespace-pre-wrap leading-relaxed">{message.text}</p>
                    {message.quickReplies && message.quickReplies.length > 0 && (
                      <div className="mt-4 space-y-2">
                        {message.quickReplies.map((reply, idx) => (
                          <button
                            key={idx}
                            onClick={() => handleQuickReply(reply)}
                            className="block w-full text-left px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all text-sm font-medium border border-white/30 transform hover:scale-105"
                          >
                            {reply}
                          </button>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              ))}
            </div>
            
            {/* Input area */}
            <div className="p-4 border-t border-blue-100 bg-gradient-to-r from-blue-50 to-purple-50">
              <div className="flex gap-2 mb-3">
                <button className="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2 rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all flex items-center justify-center gap-1 transform hover:scale-105">
                  <Mic size={16} />
                  Sesli
                </button>
                <button className="flex-1 bg-gradient-to-r from-purple-500 to-purple-600 text-white py-2 rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all flex items-center justify-center gap-1 transform hover:scale-105">
                  <Video size={16} />
                  GÃ¶rÃ¼ntÃ¼lÃ¼
                </button>
                <button className="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-2 rounded-lg text-sm font-medium hover:from-green-600 hover:to-green-700 transition-all flex items-center justify-center gap-1 transform hover:scale-105">
                  <Camera size={16} />
                  FotoÄŸraf
                </button>
              </div>
              <div className="flex gap-2">
                <input
                  type="text"
                  value={currentMessage}
                  onChange={(e) => setCurrentMessage(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && sendChatMessage()}
                  placeholder="Claude AI ile konuÅŸun..."
                  className="flex-1 px-4 py-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 outline-none bg-white/80 backdrop-blur-sm transition-all"
                />
                <button
                  onClick={sendChatMessage}
                  className="bg-gradient-to-r from-blue-500 via-purple-500 to-blue-600 text-white p-3 rounded-xl hover:shadow-xl transition-all transform hover:scale-110"
                >
                  <Send size={18} />
                </button>
              </div>
              <div className="text-center mt-2">
                <span className="text-xs text-gray-500">Powered by Claude AI â€¢ Anthropic</span>
              </div>
            </div>
          </div>
        </Card3D>
      ) : (
        <Card3D>
          <button
            onClick={() => setShowChatbot(true)}
            className="bg-gradient-to-r from-blue-500 via-purple-500 to-blue-600 text-white w-20 h-20 rounded-full shadow-2xl hover:shadow-3xl transition-all hover:scale-110 flex items-center justify-center relative overflow-hidden"
          >
            <div className="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-50 animate-pulse"></div>
            <div className="relative">
              <div className="text-3xl animate-bounce">ğŸ§ </div>
              <div className="absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full animate-ping"></div>
            </div>
          </button>
        </Card3D>
      )}
    </div>
  );

  // Acil Durum Modal
  const EmergencyModal = () => (
    showEmergencyModal && (
      <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <Card3D>
          <div className="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-3xl">
              <div className="flex justify-between items-center">
                <h2 className="text-2xl font-black">ğŸš¨ Acil Durum Sistemi</h2>
                <button
                  onClick={() => setShowEmergencyModal(false)}
                  className="hover:bg-red-700 rounded-full p-2 transition-all"
                >
                  <X size={24} />
                </button>
              </div>
            </div>
            
            <div className="p-8">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="bg-red-50 border border-red-200 rounded-2xl p-6">
                  <h3 className="text-lg font-bold text-red-700 mb-4">ğŸš‘ SaÄŸlÄ±k Acilleri</h3>
                  <ul className="space-y-2 text-sm">
                    <li>â€¢ Kalp krizi, felÃ§</li>
                    <li>â€¢ Ambulans hizmeti</li>
                    <li>â€¢ Hasta nakli</li>
                    <li>â€¢ Acil ilaÃ§ tedariki</li>
                  </ul>
                  <button className="w-full mt-4 bg-red-600 text-white py-2 rounded-lg font-bold">
                    SaÄŸlÄ±k Acili Bildir
                  </button>
                </div>

                <div className="bg-orange-50 border border-orange-200 rounded-2xl p-6">
                  <h3 className="text-lg font-bold text-orange-700 mb-4">ğŸš— UlaÅŸÄ±m Acilleri</h3>
                  <ul className="space-y-2 text-sm">
                    <li>â€¢ AraÃ§ arÄ±zasÄ±</li>
                    <li>â€¢ Acil taksi</li>
                    <li>â€¢ Ã‡ekici hizmeti</li>
                    <li>â€¢ HavaalanÄ± ulaÅŸÄ±m</li>
                  </ul>
                  <button className="w-full mt-4 bg-orange-600 text-white py-2 rounded-lg font-bold">
                    UlaÅŸÄ±m Acili Bildir
                  </button>
                </div>

                <div className="bg-blue-50 border border-blue-200 rounded-2xl p-6">
                  <h3 className="text-lg font-bold text-blue-700 mb-4">ğŸ  BarÄ±nma Acilleri</h3>
                  <ul className="space-y-2 text-sm">
                    <li>â€¢ YangÄ±n/felaket maÄŸduru</li>
                    <li>â€¢ Acil konaklama</li>
                    <li>â€¢ Evsizlik durumu</li>
                    <li>â€¢ GÃ¼venli barÄ±nma</li>
                  </ul>
                  <button className="w-full mt-4 bg-blue-600 text-white py-2 rounded-lg font-bold">
                    BarÄ±nma Acili Bildir
                  </button>
                </div>

                <div className="bg-green-50 border border-green-200 rounded-2xl p-6">
                  <h3 className="text-lg font-bold text-green-700 mb-4">âš¡ DiÄŸer Aciller</h3>
                  <ul className="space-y-2 text-sm">
                    <li>â€¢ Elektrik/su arÄ±zasÄ±</li>
                    <li>â€¢ Ã‡ilingir hizmeti</li>
                    <li>â€¢ Acil temizlik</li>
                    <li>â€¢ Veteriner acili</li>
                  </ul>
                  <button className="w-full mt-4 bg-green-600 text-white py-2 rounded-lg font-bold">
                    DiÄŸer Acil Bildir
                  </button>
                </div>
              </div>

              <div className="mt-8 bg-yellow-50 border border-yellow-200 rounded-2xl p-6">
                <h4 className="font-bold text-yellow-800 mb-2">ğŸ¦¸â€â™‚ï¸ Acil Durum KahramanlarÄ±</h4>
                <p className="text-yellow-700 text-sm mb-4">
                  Acil durumlarÄ±nÄ±zda size yardÄ±m edecek Ã¶zel olarak eÄŸitilmiÅŸ kahramanlarÄ±mÄ±z 24/7 hazÄ±r bekliyor.
                </p>
                <div className="flex items-center gap-4">
                  <div className="flex -space-x-2">
                    {mockSellers.filter(s => s.emergencyHero).map((hero, idx) => (
                      <div key={idx} className="w-10 h-10 bg-gradient-to-r from-red-500 to-red-700 rounded-full flex items-center justify-center text-white font-bold border-2 border-white">
                        {hero.avatar}
                      </div>
                    ))}
                  </div>
                  <span className="text-sm text-yellow-700 font-medium">
                    4 acil durum kahramanÄ± aktif
                  </span>
                </div>
              </div>
            </div>
          </div>
        </Card3D>
      </div>
    )
  );

  // Ana render
  return (
    <div className="min-h-screen bg-gray-50">
      <Header />
      
      {currentScreen === 'welcome' && <WelcomeScreen />}
      {currentScreen === 'home' && <HomeDashboard />}
      {currentScreen === 'requests' && <RequestsScreen />}
      {currentScreen === 'sellers' && <SellersScreen />}
      
      <Chatbot />
      <EmergencyModal />
    </div>
  );
};

export default FindBuyerApp;
